<div class="pdf-image-viewer-container">
  <h1>PDF & Image Merger / Viewer</h1>

  <div class="file-input-section">
    <input
      type="file"
      multiple
      accept=".pdf, .png, .jpg, .jpeg"
      (change)="onFileSelected($event)"
    />
    <button (click)="mergeAndDownload()" [disabled]="files().length === 0">
      Merge & Download PDF
    </button>
  </div>

  <div class="content-section">
    <div class="file-list-panel">
      <h2>Selected Files</h2>
      @if (files().length === 0) {
        <p>No files selected.</p>
      } @else {
        <ul>
          @for (file of files(); track $index) {
            <li (click)="selectFileForPreview(file)">
              {{ file.name }} ({{ file.type }})
              <button (click)="$event.stopPropagation(); removeFile($index)">
                X
              </button>
            </li>
          }
        </ul>
      }
    </div>

    <div class="viewer-panel">
      <h2>Preview</h2>
      @if (selectedFile()) {
        @if (selectedFile()!.type === 'application/pdf') {
          <pdf-viewer
            [src]="selectedFile()!.url"
            [render-text]="true"
            [original-size]="false"
            [fit-to-page]="true"
            style="width: 100%; height: 100%;"
          ></pdf-viewer>
        } @else if (selectedFile()!.type.startsWith('image/')) {
          <img
            [src]="selectedFile()!.url"
            alt="Preview"
            style="max-width: 100%; max-height: 100%; object-fit: contain;"
          />
        }
      } @else {
        <p>Select a file from the list to preview.</p>
      }
    </div>
  </div>
</div>
